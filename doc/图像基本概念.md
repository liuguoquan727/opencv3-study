图像基本概念
===

# 灰度

>一幅图像可以定义为一个二维函数`f(x,y)`，其中 x 和 y是空间坐标，而 f 在任意一对坐标（x， y）处的幅度称为该点处图像的亮度或灰度。当 x，y和 f 的幅度值都是有限的离散值时，称该图像为数字图像。

# 像素

在计算机中，有两个大家都熟悉的概念：**像素（pixel）**和**分辨率（resolution）**。  

我们将图像进行采样的单位称为像素，像素是组成图像的最基本元素，是数字图像显示的基本单位。像素是一个逻辑尺寸单位，比如一台计算机，其屏幕大小为17英寸，可以用`800行*1280列`个像素（格子）来显示桌面的图像，也可以用`768行*1024列`来显示桌面图像，不过显示的图像的清晰度会有差别。在计算机编程中，由像素组成的图像也通常叫“位图”或“光栅图像”。 
 
分辨率狭义的是指显示器所能显示的像素的多少，当用户设置桌面分辨率为`1280*800`时，表示的意思就是在这个屏幕大小的物理尺寸上，显示器所显示的图像由`800行*1280列`个像素组成；可以看出，在同样大小的物理尺寸上，分辨率越高的图像，其像素所表示的物理尺寸越小，画面也就越精细，整个图像看起来也就越清晰。广义的分辨率是指对一个物体成像数字时化时进行采样的物理尺寸的大小，比如我们嫦娥一号卫星拍摄的月亮的照片，其分辨率是个很大的数（通常称分辨率很低），如几千平方公里，意思是说，在拍摄的月球的照片上，一个像素点相当于月球上几千公里见方。

# 采样量化

将空间上连续的图像变换成离散点的操作称为**采样**。采样间隔和采样孔径的大小是两个很重要的参数。经采样图像被分割成空间上离散的像素，但其灰度是连续的，还不能用计算机进行处理。  

将像素灰度转换成离散的整数值的过程叫**量化**。表示像素明暗程度的整数称为像素的灰度级（或灰度值或灰度）。一幅数字图像中不同灰度级的个数称为灰度级数，用G表示。灰度级数就代表一幅数字图像的层次。图像数据的实际层次越多视觉效果就越好。一般来说，G=2g ，g就是表示存储图像像素灰度值所需的比特位数。若一幅数字图像的量化灰度级数G=256=28级，灰度取值范围一般是0~255的整数，由于用8bit就能表示灰度图像像素的灰度值，因此常称8 bit 量化。从视觉效果来看，采用大于或等于6比特位量化的灰度图像，视觉上就能令人满意。 一幅大小为M×N、灰度级数为G的图像所需的存储空间，即图像的数据量，大小为 `M×N×g（bit）`。

一般来说，采样间隔越大，所得图像像素数越少，空间分辨率低，质量差，严重时出现像素呈块状的国际棋盘效应； 采样间隔越小，所得图像像素数越多，空间分辨率高，图像质量好，但数据量大;同样，量化等级越多，所得图像层次越丰富，灰度分辨率高，图像质量好，但数据量大；量化等级越少，图像层次欠丰富，灰度分辨率低，会出现假轮廓现象，图像质量变差，但数据量小。

# 图像类型

数字图像根据灰度级数的差异可分为：黑白图像、灰度图像和彩色图像。

**彩色图像**是指每个像素由R、G、B分量构成的图像，中R、B、G是由不同的灰度级来描述，在数字图像中，每一个像素都有相应的数值来表示该像素的信息，彩色图像的信息就是颜色信息。根据三基色原理，任何颜色都可以表示为三个基本颜色红、绿、蓝（RGB）按不同比例合成产生。通常所说的24位（bit）位图（windows画图器程序中有相应的保存选项）就是每个像素由24位信息来表示颜色的位图，R、G、B每种颜色通道信息各8位，因此有224（16777216）种不同的颜色（人眼对色彩的分辨能力大致是一千万色），这些颜色足以表达出人眼能够辨别的所有信息，因此也叫做真彩色图像。

**灰度图像**是指灰度级数大于2的图像。但它不包含彩色信息。例如黑白的老照片。由于人眼能够辩出的亮度等级是有限的，因此数字图像中也可以用有限的等级来描述一副图像。例如，每个像素采用一个字节来表示其亮度信息，就有256级的亮度（28），等级越多的图像效果越好。  

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.6__28b_29.jpg)

**黑白图像**图像的每个像素只能是黑或白，没有中间的过渡，故又称为二值图像。二值图像的像素值为0或1。二值图像所含的信息较少，占用的存储空间也相应较少，但二值图像也有不少的应用，如指纹图像以及文字的识别等，都需要获得二值图像。  

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.6__28a_29.jpg)

# 三基色原理

* **相加混色与RGB**

人眼对红、绿、蓝最为敏感，人的眼睛就像一个三色接收器的体系，大多数的颜色可以通过红、绿、蓝三色按照不同的比例合成产生，同样绝大多数单色光也可以分解成红绿蓝三种色光。这是色度学的最基本原理，即**三基色原理**。三种基色是相互独立的，任何一种基色都不能由其它两种颜色合成。红绿蓝是三基色，这三种颜色合成的颜色范围最为广泛。红绿蓝三基色按照不同的比例相加合成混色称为**相加混色**。其中一些混色的规律有：
>红色+绿色=黄色；
>绿色+蓝色=青色；
>红色+蓝色=品红；
>红色+绿色+蓝色=白色；
>红色+青色=白色；
>绿色+品红=白色；
>蓝色+黄色=白色 。

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.7.jpg)

当两种光按照适当比例混合得到白光时，称这两种光为**互补光**。所以，按照上述的混色规律我们可以得到，青色、黄色、品红分别是红色、蓝色、绿色的补色。

由于每个人的眼睛对于相同的单色感受不同，所以，如果用相同强度的三基色混合时，假设得到白光的强度为100%，这时，人的主观感受是，绿光最亮，红光次之，蓝光最弱。如果用Y表示景物的亮度，则通常有：

>Y=0.299R+0.587G+0.114B

因为红、绿、蓝三基色能够合成自然界所有的色彩，因此在电子设备和软件中，经常使用红绿蓝三基色合成五颜六色的图像。用以上的相加混色所表示的颜色模式成为RGB模式。

*   **相减混色与CMY（CMYK）**

大家知道，显示器采用RGB模式，就是因为显示器是电子光束轰击荧光屏上的荧光材料发出亮光从而产生颜色。当没有光的时候为黑色，光线加到最大时为白色。而打印机呢？它的油墨不会自己发出光线。因而只有采用吸收特定光波而反射其它光的颜色，所以需要用减色法来解决。**CMYK颜色模式**是一种印刷模式。其中四个字母分别指青（Cyan）、洋红（Magenta）、黄（Yellow）、黑（Black），在印刷中代表四种颜色的油墨。CMYK模式在本质上与RGB模式没有什么区别，只是产生色彩的原理不同，在RGB模式中由光源发出的色光混合生成颜色，而在CMYK模式中由光线照到有不同比例C、M、Y、K油墨的纸上，部分光谱被吸收后，反射到人眼的光产生颜色。由于C、M、Y、K在混合成色时，随着C、M、Y、K四种成分的增多，反射到人眼的光会越来越少，光线的亮度会越来越低，所有CMYK模式产生颜色的方法又被称为色光减色法。

在白光照射下，青色颜料能吸收红色而反射青色，黄色颜料吸收蓝色而反射黄色，品红颜料吸收绿色而反射品红。也就是：

>白色-红色=青色；
>白色-绿色=品红；
>白色-蓝色=黄色

如果把青色和黄色两种颜料混合，在白光照射下，由于颜料吸收了红色和蓝色，而反射了绿色，对于颜料的混合我们表示如下：

>颜料(黄色+青色)=白色-红色-蓝色=绿色；
>颜料(品红+青色)=白色-红色-绿色=蓝色；
>颜料(黄色+品红)=白色-绿色-蓝色=红色

以上的都是相减混色,相减混色就是以吸收三基色比例不同而形成不同的颜色的。所以有把青色、品红、黄色称为颜料三基色。CMYK模式是一种颜料模式,所以它属于印刷模式,但本质上与RGB模式没有区别,只是产生颜色的方式不同。

# 彩色模型

## RGB

RGB色彩模式是工业界的一种颜色标准，是通过对红(R)、绿(G)、蓝(B)三个颜色通道的变化以及它们相互之间的叠加来得到各式各样的颜色的，RGB 即是代表红、绿、蓝三个通道的颜色，这个标准几乎包括了人类视力所能感知的所有颜色，是目前运用最广的颜色系统之一。

RGB 色彩模式使用 RGB 模型为图像中每一个像素的 RGB 分量分配一个0~255范围内的强度值。例如：纯红色 R 值为255，G 值为0，B 值为0；灰色的 R、G、B 三个值相等（除了0和255）；白色的 R、G、B 都为255；黑色的 R、G、B 都为0。RGB 图像只使用三种颜色，就可以使它们按照不同的比例混合，在屏幕上重现16777216（224）种颜色。

## YUV

在现代彩色电视中，通常采用三管彩色摄像机或彩色 CCD 摄像机，它把得到的彩色图像信号，经分色、分别放大校正得到 RGB，再经过矩阵变换电路得到亮度信号 Y 和两个色差信号 R-Y、B-Y，最后发送端将三个信号分别进行编码，用同一信道发送出去。这就是我们常用的 YUV 颜色空间。

YUV是被欧洲电视系统所采用的一种颜色编码方法（属于PAL），是PAL和SECAM模拟彩色电视制式采用的颜色空间。其中的Y，U，V几个字母不是英文单词的组合词**，Y代表亮度，U，V代表色差，U和V是构成彩色的两个分量。YUV主要用于优化彩色视频信号的传输，使其向后兼容老式黑白电视。与RGB视频信号传输相比，它最大的优点在于只需占用极少的频宽（RGB要求三个独立的视频信号同时传输）。其中“Y”表示明亮度（Luminance或Luma），也就是灰阶值；而“U”和“V” 表示的则是色度（Chrominance或Chroma），作用是描述影像色彩及饱和度，用于指定像素的颜色。“亮度”是透过RGB输入信号来建立的，方法是将RGB信号的特定部分叠加到一起。“色度”则定义了颜色的两个方面─色调与饱和度，分别用Cr和Cb来表示。其中，Cr反映了RGB输入信号红色部分与RGB信号亮度值之间的差异。而Cb反映的是RGB输入信号蓝色部分与RGB信号亮度值之同的差异。

采用YUV色彩空间的重要性是它的亮度信号Y和色度信号U、V是分离的。如果只有Y信号分量而没有U、V分量，那么这样表示的图像就是黑白灰度图像。彩色电视采用YUV空间正是为了用亮度信号Y解决彩色电视机与黑白电视机的兼容问题，使黑白电视机也能接收彩色电视信号。

YUV相关色彩模型与RGB的转换方程如下：

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.7__281_29.jpg)

## YCbCr

在DVD、摄像机、数字电视等消费类视频产品中，常用的色彩编码方案是YCbCr，其中Y是指亮度分量，Cb 指蓝色色度分量，而 Cr 指红色色度分量。YCbCr 是在世界数字组织视频标准研制过程中作为`ITU - R BT1601` 建议的一部分，其实是 YUV 经过缩放和偏移的翻版。在YUV 家族中，YCbCr 是在计算机系统中应用最多的成员, 其应用领域很广泛，JPEG，MPEG均采用此格式。因此，一般人们所讲的YUV大多是指YCbCr。其中Y与YUV 中的Y含义一致，Cb，Cr 同样都指色彩, 只是在表示方法上不同而已。常用的从RGB到YCbCr的转换公式如下：

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.7__283_29.jpg)

图像子采样:我们可以对图像中每个像素设置一个单独的亮度值，而按照某些特定的规则，将一组像素赋予相同的色度值。我们将这个过程称为子采样。有如下子采样的格式：

* 4:4:4 YUV (YCbCr) 该格式是传统的未采取子采样的格式，对每一个像素的Y、U（Cb）、V（Cr）都进行采样。每个成份通常包含8位，每个像素需要24位，这种格式因此也通常称为4：4：4格式。

* 4:2:2 YUV (YCbCr) 采用2：1的水平方向子采样，它的含义是，对每个像素的亮度值Y进行采样，对水平方向连续两个像素的U（Cb） V（Cr）进行采样。如果每一个通道占用8位，那么每两个像素占有8*2+8+8=32位的空间，因此每个像素比4：4：4格式少用8位空间。

* 4:1:1 YCbCr 采用4：1的水平方向子采样，它的含义是，对每个像素的亮度值Y进行采样，对水平方向连续4个像素的U（Cb） V（Cr）进行采样。如果每一个通道占用8位，那么每4个像素占有8*4+8+8=48位的空间，因此每个像素比4：4：4格式少用12位空间。

* 4:2:0 YUV (YCbCr) 采用水平和垂直方向2：1子采样，它的含义是，对每个像素的亮度值Y进行采样，每`2*2`个像素块进行一次U(Cb) 和 V(Cr)采样。如果每一个通道占用8位，则每4个像素占有`8*4+8+8=48`位的空间，因此每个像素比`4：4：4`格式少用12位空间。

>4:2:0格式是便携式视频设备(MPEG-4)以及电视会议(H.263)最常用格式；4：2：2格式是DVD、数字电视、HDTV 以及其它消费类视频设备的最常用格式；4：4：4格式用于高质量视频应用、演播室以及专业视频产品。

在图像压缩算法中，JPEG采用了一种特定的子采样方法。在JPEG算法中，子采样的格式会决定最小编码单元的结构（minimal coded units, or MCUs），因此在IPP中，支持JPEG算法的子采样格式：

* 4:4:4 YCbCr 针对每个`8*8`像素块大小，有`8*8`块大小的Y值，同时，也分别有一个`8*8`块大小的Cb和Cr值。

* 4:2:2 YCbCr 针对两个水平方向连续的`8*8`像素块，有两个`8*8`块大小的Y值，也分别有一个`8*8`块大小的Cb值和Cr值。

* 4:1:1 YCbCr 针对每4个`8*8`块（水平和垂直各两块`8*8`大小的像素块），有4个`8*8`块大小的Y值，也分别有一个`8*8`块大小的Cb值和Cr值。

## HSV颜色模型

**颜色（Hue，色相或色彩）**，色相描述了具体的颜色，如红、黄、紫等，即其在光谱上的位置（该可见光的波长是多少）。如图所示，用从0到3600的圆圈代表了不同的颜色。

**颜色的饱和度（S，纯度）**，饱和度衡量该颜色相对于白色的比值，饱和度越高，颜色越鲜艳。比如，一个全部是红色而没有白色成份的颜色是完全饱和的，如果将白色加入到红色中去，红色会变得更加柔和，我们感知的颜色也会从红色相粉红色变化，此时的颜色（色相）仍然是红色，但是该颜色变得不饱和。

**明度(V)**表示颜色明亮的程度，对于光源色，明度值与发光体的光亮度有关；对于物体色，此值和物体的透射比或反射比有关。通常取值范围为0%（黑）到100%（白）。

![HSV颜色模型](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.9.jpg)

![](https://software.intel.com/sites/default/files/m/d/4/1/d/8/2.10.jpg)

# 参考

[数字图像基础之图像基本概念](https://software.intel.com/en-us/node/256959)

